# Запуск проекта в Docker

Этот проект настроен для работы в Docker контейнерах. Он включает три компонента:

1. **Бэкенд (Flask)** - API сервер
2. **Фронтенд (Next.js)** - Пользовательский интерфейс
3. **Cкрипт для сбора данных (main.py)** - Постоянно работающий процесс для сбора и записи данных в базу данных

## Предварительные требования

- Docker и Docker Compose должны быть установлены на сервере
- Порты 3000 и 5000 должны быть доступны

## Запуск проекта

1. Клонируйте репозиторий на сервер:

```bash
git clone <repository-url>
cd <repository-directory>
```

2. Запустите все контейнеры с помощью Docker Compose:

```bash
docker-compose up -d
```

Это запустит все три контейнера в фоновом режиме.

3. Для просмотра логов используйте:

```bash
# Для всех контейнеров
docker-compose logs -f

# Для конкретного контейнера
docker-compose logs -f backend
docker-compose logs -f frontend
docker-compose logs -f main
```

## Структура проекта

- **backend/** - Содержит Flask API и скрипт main.py
- **/* (корневая директория)** - Содержит Next.js фронтенд

## Важные примечания

- База данных SQLite (`db.sqlite3`) подключена как том к контейнерам бэкенда и main. Это позволяет сохранять данные между перезапусками.
- Все контейнеры настроены на автоматический перезапуск в случае сбоя.
- Фронтенд доступен по адресу `http://<server-ip>:3000`
- API бэкенда доступен по адресу `http://<server-ip>:5000`

## Обновление проекта

Для обновления проекта:

1. Получите последние изменения из репозитория:

```bash
git pull
```

2. Перестройте и перезапустите контейнеры:

```bash
docker-compose up -d --build
```

## Остановка проекта

Для остановки всех контейнеров:

```bash
docker-compose down
``` 